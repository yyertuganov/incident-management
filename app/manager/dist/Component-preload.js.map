{"version":3,"file":"Component-preload.js","sections":[{"offset":{"line":1,"column":0},"map":{"version":3,"names":[],"sources":["Component-preload.js?bundle-code-0"],"mappings":"AAAA;AACA","sourcesContent":["sap.ui.require.preload({\n"],"sourceRoot":""}},{"offset":{"line":3,"column":0},"map":{"version":3,"file":"Component.js","names":["createDeviceModel","___model_models","Component","BaseComponent","extend","metadata","manifest","interfaces","init","_init","BaseComponent.prototype.init.call","this","setModel","getRouter","initialize"],"sources":["Component.ts"],"sourcesContent":["import BaseComponent from \"sap/ui/core/UIComponent\";\nimport { createDeviceModel } from \"./model/models\";\n\n/**\n * @namespace ns.manager\n */\nexport default class Component extends BaseComponent {\n\n\tpublic static metadata = {\n\t\tmanifest: \"json\",\n        interfaces: [\n            \"sap.ui.core.IAsyncContentCreation\"\n        ]\n\t};\n\n\tpublic init() : void {\n\t\t// call the base component's init function\n\t\tsuper.init();\n\n        // set the device model\n        this.setModel(createDeviceModel(), \"device\");\n\n        // enable routing\n        this.getRouter().initialize();\n\t}\n}"],"mappings":"AAAA,yGACSA,EAAiBC,EAAA,qBAE1B,MAGqBC,EAAkBC,EAAaC,OAAA,wBAErCC,SAAW,CACxBC,SAAU,OACJC,WAAY,CACR,sCAIJC,KAAI,SAAAC,IAEVC,sBAAAC,MAGMA,KAAKC,SAASZ,IAAqB,UAGnCW,KAAKE,YAAYC,YACxB,IAAC,OAlBmBZ,CAAS","ignoreList":[],"sourceRoot":""}},{"offset":{"line":6,"column":0},"map":{"version":3,"file":"App.controller.js","names":["App","Controller","extend","onInit","_onInit"],"sources":["App.controller.ts"],"sourcesContent":["import Controller from \"sap/ui/core/mvc/Controller\";\n\n/**\n * @namespace ns.manager.controller\n */\nexport default class App extends Controller {\n\n    /*eslint-disable @typescript-eslint/no-empty-function*/\n    public onInit(): void {\n\n    }\n}"],"mappings":"AAAA,mFAEA,MAGqBA,EAAYC,EAAUC,OAAA,6BAGhCC,OAAM,SAAAC,IAEb,IAAC,OALgBJ,CAAG","ignoreList":[],"sourceRoot":"controller"}},{"offset":{"line":9,"column":0},"map":{"version":3,"file":"Main.controller.js","names":["Main","Controller","extend","navToSpotStatus","_navToSpotStatus","event","spotIndex","getSource","getBindingContext","getProperty","UIComponent","getRouterFor","this","navTo","index"],"sources":["Main.controller.ts"],"sourcesContent":["import UIComponent from \"sap/ui/core/UIComponent\";\nimport Controller from \"sap/ui/core/mvc/Controller\";\nimport { GeoMap$KeyPressEvent } from \"sap/ui/vbm/GeoMap\";\n\n/**\n * @namespace ns.manager.controller\n */\nexport default class Main extends Controller {\n    navToSpotStatus(event: GeoMap$KeyPressEvent) {\n        const spotIndex = event.getSource().getBindingContext(\"spotModel\")?.getProperty(\"customerID\");\n        UIComponent.getRouterFor(this).navTo(\"RouteSpotStatus\", {index: spotIndex});\n    }\n}"],"mappings":"AAAA,+GAIA,MAGqBA,EAAaC,EAAUC,OAAA,8BACxCC,gBAAe,SAAAC,EAACC,GACZ,MAAMC,EAAYD,EAAME,YAAYC,kBAAkB,cAAcC,YAAY,cAChFC,EAAYC,aAAaC,MAAMC,MAAM,kBAAmB,CAACC,MAAOR,GACpE,IAAC,OAJgBN,CAAI","ignoreList":[],"sourceRoot":"controller"}},{"offset":{"line":12,"column":0},"map":{"version":3,"file":"SpotStatus.controller.js","names":["Urgency","___format_util","SpotStatus","Controller","extend","getUrgencyFilter","_getUrgencyFilter","key","Object","values","includes","Filter","FilterOperator","EQ","onFilterSelect","_onFilterSelect","event","getParameter","this","setFilter","navToMain","_navToMain","previousHash","History","getInstance","getPreviousHash","undefined","window","history","go","UIComponent","getRouterFor","navTo","onInit","_onInit","oRouter","getOwnerComponent","getRouter","getRoute","attachMatched","onRouteMatched","_onRouteMatched","oParameters","getParameters","customerId","arguments","index","defaultFilter","getView","byId","getSelectedKey","_setFilter","statusFilters","listBinding","getBinding","filter"],"sources":["SpotStatus.controller.ts"],"sourcesContent":["import Controller from \"sap/ui/core/mvc/Controller\";\nimport UIComponent from \"sap/ui/core/UIComponent\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport { IconTabBar$SelectEvent } from \"sap/m/IconTabBar\";\nimport IconTabBar from \"sap/m/IconTabBar\";\nimport ListBinding from \"sap/ui/model/ListBinding\";\nimport { Urgency } from \"../format/util\";\nimport { Route$MatchedEvent } from \"sap/ui/core/routing/Route\";\nimport History from \"sap/ui/core/routing/History\";  \n\n/**\n * @namespace ns.manager.controller\n */\nexport default class SpotStatus extends Controller {\n    \n    private defaultFilter: Filter;\n\n    getUrgencyFilter(key: string): Filter[]{\n        return (Object.values(Urgency) as Array<string>).includes(key) ? [new Filter(\"urgency\", FilterOperator.EQ, key, false)] : [];\n    }\n\n    onFilterSelect(event: IconTabBar$SelectEvent): void {\n        const key = event.getParameter(\"key\");\n        this.setFilter(key);\n    }\n\n    navToMain() {\n        const previousHash = History.getInstance().getPreviousHash();\n        if (previousHash !== undefined) {\n            window.history.go(-1);\n        } else {\n            UIComponent.getRouterFor(this).navTo(\"RouteMain\", {}, true);\n        }\n    }\n\n    onInit() {\n        const oRouter = (this.getOwnerComponent() as UIComponent)?.getRouter();\n        oRouter.getRoute(\"RouteSpotStatus\")!.attachMatched(this.onRouteMatched, this);\n    }\n\n    private onRouteMatched(event: Route$MatchedEvent): void {\n        const oParameters: any = event.getParameters();\n        const customerId = oParameters.arguments.index;\n        this.defaultFilter = new Filter(\"customerID\", FilterOperator.EQ, customerId, false);\n        this.setFilter((this.getView()?.byId(\"iconTabBar\") as IconTabBar)?.getSelectedKey());\n    }\n\n    private setFilter(key: string | undefined): void {\n        let statusFilters: Filter[] = [];\n        const listBinding = this.getView()?.byId(\"incidentList\")?.getBinding(\"items\") as ListBinding;      \n        if (key) {\n            statusFilters = this.getUrgencyFilter(key);\n        }\n        listBinding.filter([this.defaultFilter, ...statusFilters]);        \n    }\n\n}"],"mappings":"AAAA,gOAOSA,EAAOC,EAAA,WAIhB,MAGqBC,EAAmBC,EAAUC,OAAA,oCAI9CC,iBAAgB,SAAAC,EAACC,GACb,OAAQC,OAAOC,OAAOT,GAA2BU,SAASH,GAAO,CAAC,IAAII,EAAO,UAAWC,EAAeC,GAAIN,EAAK,QAAU,EAC9H,EAEAO,eAAc,SAAAC,EAACC,GACX,MAAMT,EAAMS,EAAMC,aAAa,OAC/BC,KAAKC,UAAUZ,EACnB,EAEAa,UAAS,SAAAC,IACL,MAAMC,EAAeC,EAAQC,cAAcC,kBAC3C,GAAIH,IAAiBI,UAAW,CAC5BC,OAAOC,QAAQC,IAAI,EACvB,KAAO,CACHC,EAAYC,aAAab,MAAMc,MAAM,YAAa,CAAC,EAAG,KAC1D,CACJ,EAEAC,OAAM,SAAAC,IACF,MAAMC,EAAWjB,KAAKkB,qBAAqCC,YAC3DF,EAAQG,SAAS,mBAAoBC,cAAcrB,KAAKsB,eAAgBtB,KAC5E,EAEQsB,eAAc,SAAAC,EAACzB,GACnB,MAAM0B,EAAmB1B,EAAM2B,gBAC/B,MAAMC,EAAaF,EAAYG,UAAUC,MACzC5B,KAAK6B,cAAgB,IAAIpC,EAAO,aAAcC,EAAeC,GAAI+B,EAAY,OAC7E1B,KAAKC,UAAWD,KAAK8B,WAAWC,KAAK,eAA8BC,iBACvE,EAEQ/B,UAAS,SAAAgC,EAAC5C,GACd,IAAI6C,EAA0B,GAC9B,MAAMC,EAAcnC,KAAK8B,WAAWC,KAAK,iBAAiBK,WAAW,SACrE,GAAI/C,EAAK,CACL6C,EAAgBlC,KAAKb,iBAAiBE,EAC1C,CACA8C,EAAYE,OAAO,CAACrC,KAAK6B,iBAAkBK,GAC/C,IAAC,OAzCgBlD,CAAU","ignoreList":[],"sourceRoot":"controller"}},{"offset":{"line":15,"column":0},"map":{"version":3,"file":"util.js","names":["Urgency","formatHighlightColor","urgency","High","MessageType","Error","Medium","Warning","Information","formatDaysAgo","createdAt","oDateTimeWithTimezoneFormat","DateFormat","getDateTimeWithTimezoneInstance","since","parse","oDateFormat","getDateInstance","relative","format","__exports","__esModule"],"sources":["util.ts"],"sourcesContent":["import  MessageType from \"sap/ui/core/message/MessageType\";\nimport DateFormat from \"sap/ui/core/format/DateFormat\";\n\nexport enum Urgency {\n    High = \"H\",\n    Medium = \"M\",\n    Low = \"L\"\n}\n\nexport function formatHighlightColor(urgency: Urgency): MessageType {\n\n    if (urgency === Urgency.High) {return MessageType.Error;}\n    else if (urgency === Urgency.Medium) {return MessageType.Warning;}\n    return MessageType.Information;\n\n}\n\nexport function formatDaysAgo(createdAt: string): string {\n    const oDateTimeWithTimezoneFormat = DateFormat.getDateTimeWithTimezoneInstance();\n    const since = oDateTimeWithTimezoneFormat.parse(createdAt);\n    const oDateFormat = DateFormat.getDateInstance({relative: true});\n    return oDateFormat.format(since![0] as Date);\n}"],"mappings":"AAAA,8HAGYA,EAAO,SAAPA,KAAO,YAAPA,EAAO,cAAPA,EAAO,kBAAPA,CAAO,EAAPA,GAAO,IAMZ,SAASC,EAAqBC,GAEjC,GAAIA,IAAYF,EAAQG,KAAM,CAAC,OAAOC,EAAYC,KAAM,MACnD,GAAIH,IAAYF,EAAQM,OAAQ,CAAC,OAAOF,EAAYG,OAAQ,CACjE,OAAOH,EAAYI,WAEvB,CAEO,SAASC,EAAcC,GAC1B,MAAMC,EAA8BC,EAAWC,kCAC/C,MAAMC,EAAQH,EAA4BI,MAAML,GAChD,MAAMM,EAAcJ,EAAWK,gBAAgB,CAACC,SAAU,OAC1D,OAAOF,EAAYG,OAAOL,EAAO,GACrC,CAAC,IAAAM,EAAA,CAAAC,WAAA,MAAAD,EAAApB,UAAAoB,EAAAnB,uBAAAmB,EAAAX,gBAAA,OAAAW,CAAA","ignoreList":[],"sourceRoot":"format"}},{"offset":{"line":20,"column":0},"map":{"version":3,"file":"models.js","names":["createDeviceModel","model","JSONModel","Device","setDefaultBindingMode","__exports","__esModule"],"sources":["models.ts"],"sourcesContent":["import JSONModel from \"sap/ui/model/json/JSONModel\";\nimport Device from \"sap/ui/Device\";\n\nexport function createDeviceModel () {\n    const model = new JSONModel(Device);\n    model.setDefaultBindingMode(\"OneWay\");\n    return model;\n}"],"mappings":"AAAA,sGAGO,SAASA,IACZ,MAAMC,EAAQ,IAAIC,EAAUC,GAC5BF,EAAMG,sBAAsB,UAC5B,OAAOH,CACX,CAAC,IAAAI,EAAA,CAAAC,WAAA,MAAAD,EAAAL,oBAAA,OAAAK,CAAA","ignoreList":[],"sourceRoot":"model"}}]}