{"version":3,"file":"SpotStatus-dbg.controller.js","names":["Urgency","___format_util","SpotStatus","Controller","extend","getUrgencyFilter","_getUrgencyFilter","key","Object","values","includes","Filter","FilterOperator","EQ","onFilterSelect","_onFilterSelect","event","getParameter","setFilter","navToMain","_navToMain","previousHash","History","getInstance","getPreviousHash","undefined","window","history","go","UIComponent","getRouterFor","navTo","onInit","_onInit","oRouter","getOwnerComponent","getRouter","getRoute","attachMatched","onRouteMatched","_onRouteMatched","oParameters","getParameters","customerId","arguments","index","defaultFilter","getView","byId","getSelectedKey","_setFilter","statusFilters","listBinding","getBinding","filter"],"sources":["SpotStatus.controller.ts"],"sourcesContent":["import Controller from \"sap/ui/core/mvc/Controller\";\nimport UIComponent from \"sap/ui/core/UIComponent\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport { IconTabBar$SelectEvent } from \"sap/m/IconTabBar\";\nimport IconTabBar from \"sap/m/IconTabBar\";\nimport ListBinding from \"sap/ui/model/ListBinding\";\nimport { Urgency } from \"../format/util\";\nimport { Route$MatchedEvent } from \"sap/ui/core/routing/Route\";\nimport History from \"sap/ui/core/routing/History\";  \n\n/**\n * @namespace ns.manager.controller\n */\nexport default class SpotStatus extends Controller {\n    \n    private defaultFilter: Filter;\n\n    getUrgencyFilter(key: string): Filter[]{\n        return (Object.values(Urgency) as Array<string>).includes(key) ? [new Filter(\"urgency\", FilterOperator.EQ, key, false)] : [];\n    }\n\n    onFilterSelect(event: IconTabBar$SelectEvent): void {\n        const key = event.getParameter(\"key\");\n        this.setFilter(key);\n    }\n\n    navToMain() {\n        const previousHash = History.getInstance().getPreviousHash();\n        if (previousHash !== undefined) {\n            window.history.go(-1);\n        } else {\n            UIComponent.getRouterFor(this).navTo(\"RouteMain\", {}, true);\n        }\n    }\n\n    onInit() {\n        const oRouter = (this.getOwnerComponent() as UIComponent)?.getRouter();\n        oRouter.getRoute(\"RouteSpotStatus\")!.attachMatched(this.onRouteMatched, this);\n    }\n\n    private onRouteMatched(event: Route$MatchedEvent): void {\n        const oParameters: any = event.getParameters();\n        const customerId = oParameters.arguments.index;\n        this.defaultFilter = new Filter(\"customerID\", FilterOperator.EQ, customerId, false);\n        this.setFilter((this.getView()?.byId(\"iconTabBar\") as IconTabBar)?.getSelectedKey());\n    }\n\n    private setFilter(key: string | undefined): void {\n        let statusFilters: Filter[] = [];\n        const listBinding = this.getView()?.byId(\"incidentList\")?.getBinding(\"items\") as ListBinding;      \n        if (key) {\n            statusFilters = this.getUrgencyFilter(key);\n        }\n        listBinding.filter([this.defaultFilter, ...statusFilters]);        \n    }\n\n}"],"mappings":";;;;;QAOSA,OAAO,GAAAC,cAAA;EAIhB;AACA;AACA;EAFA,MAGqBC,UAAU,GAASC,UAAU,CAAAC,MAAA;IAI9CC,gBAAgB,WAAAC,kBAACC,GAAW,EAAW;MACnC,OAAQC,MAAM,CAACC,MAAM,CAACT,OAAO,CAAC,CAAmBU,QAAQ,CAACH,GAAG,CAAC,GAAG,CAAC,IAAII,MAAM,CAAC,SAAS,EAAEC,cAAc,CAACC,EAAE,EAAEN,GAAG,EAAE,KAAK,CAAC,CAAC,GAAG,EAAE;IAChI,CAAC;IAEDO,cAAc,WAAAC,gBAACC,KAA6B,EAAQ;MAChD,MAAMT,GAAG,GAAGS,KAAK,CAACC,YAAY,CAAC,KAAK,CAAC;MACrC,IAAI,CAACC,SAAS,CAACX,GAAG,CAAC;IACvB,CAAC;IAEDY,SAAS,WAAAC,WAAA,EAAG;MACR,MAAMC,YAAY,GAAGC,OAAO,CAACC,WAAW,CAAC,CAAC,CAACC,eAAe,CAAC,CAAC;MAC5D,IAAIH,YAAY,KAAKI,SAAS,EAAE;QAC5BC,MAAM,CAACC,OAAO,CAACC,EAAE,CAAC,CAAC,CAAC,CAAC;MACzB,CAAC,MAAM;QACHC,WAAW,CAACC,YAAY,CAAC,IAAI,CAAC,CAACC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC;MAC/D;IACJ,CAAC;IAEDC,MAAM,WAAAC,QAAA,EAAG;MACL,MAAMC,OAAO,GAAI,IAAI,CAACC,iBAAiB,CAAC,CAAC,EAAkBC,SAAS,CAAC,CAAC;MACtEF,OAAO,CAACG,QAAQ,CAAC,iBAAiB,CAAC,CAAEC,aAAa,CAAC,IAAI,CAACC,cAAc,EAAE,IAAI,CAAC;IACjF,CAAC;IAEOA,cAAc,WAAAC,gBAACxB,KAAyB,EAAQ;MACpD,MAAMyB,WAAgB,GAAGzB,KAAK,CAAC0B,aAAa,CAAC,CAAC;MAC9C,MAAMC,UAAU,GAAGF,WAAW,CAACG,SAAS,CAACC,KAAK;MAC9C,IAAI,CAACC,aAAa,GAAG,IAAInC,MAAM,CAAC,YAAY,EAAEC,cAAc,CAACC,EAAE,EAAE8B,UAAU,EAAE,KAAK,CAAC;MACnF,IAAI,CAACzB,SAAS,CAAE,IAAI,CAAC6B,OAAO,CAAC,CAAC,EAAEC,IAAI,CAAC,YAAY,CAAC,EAAiBC,cAAc,CAAC,CAAC,CAAC;IACxF,CAAC;IAEO/B,SAAS,WAAAgC,WAAC3C,GAAuB,EAAQ;MAC7C,IAAI4C,aAAuB,GAAG,EAAE;MAChC,MAAMC,WAAW,GAAG,IAAI,CAACL,OAAO,CAAC,CAAC,EAAEC,IAAI,CAAC,cAAc,CAAC,EAAEK,UAAU,CAAC,OAAO,CAAgB;MAC5F,IAAI9C,GAAG,EAAE;QACL4C,aAAa,GAAG,IAAI,CAAC9C,gBAAgB,CAACE,GAAG,CAAC;MAC9C;MACA6C,WAAW,CAACE,MAAM,CAAC,CAAC,IAAI,CAACR,aAAa,EAAE,GAAGK,aAAa,CAAC,CAAC;IAC9D;EAAC;EAAA,OAzCgBjD,UAAU;AAAA","ignoreList":[]}