{"version":3,"file":"SpotStatus.controller.js","names":["Urgency","___format_util","SpotStatus","Controller","extend","getUrgencyFilter","_getUrgencyFilter","key","Object","values","includes","Filter","FilterOperator","EQ","onFilterSelect","_onFilterSelect","event","getParameter","this","setFilter","navToMain","_navToMain","previousHash","History","getInstance","getPreviousHash","undefined","window","history","go","UIComponent","getRouterFor","navTo","onInit","_onInit","oRouter","getOwnerComponent","getRouter","getRoute","attachMatched","onRouteMatched","_onRouteMatched","oParameters","getParameters","customerId","arguments","index","defaultFilter","getView","byId","getSelectedKey","_setFilter","statusFilters","listBinding","getBinding","filter"],"sources":["SpotStatus.controller.ts"],"sourcesContent":["import Controller from \"sap/ui/core/mvc/Controller\";\nimport UIComponent from \"sap/ui/core/UIComponent\";\nimport Filter from \"sap/ui/model/Filter\";\nimport FilterOperator from \"sap/ui/model/FilterOperator\";\nimport { IconTabBar$SelectEvent } from \"sap/m/IconTabBar\";\nimport IconTabBar from \"sap/m/IconTabBar\";\nimport ListBinding from \"sap/ui/model/ListBinding\";\nimport { Urgency } from \"../format/util\";\nimport { Route$MatchedEvent } from \"sap/ui/core/routing/Route\";\nimport History from \"sap/ui/core/routing/History\";  \n\n/**\n * @namespace ns.manager.controller\n */\nexport default class SpotStatus extends Controller {\n    \n    private defaultFilter: Filter;\n\n    getUrgencyFilter(key: string): Filter[]{\n        return (Object.values(Urgency) as Array<string>).includes(key) ? [new Filter(\"urgency\", FilterOperator.EQ, key, false)] : [];\n    }\n\n    onFilterSelect(event: IconTabBar$SelectEvent): void {\n        const key = event.getParameter(\"key\");\n        this.setFilter(key);\n    }\n\n    navToMain() {\n        const previousHash = History.getInstance().getPreviousHash();\n        if (previousHash !== undefined) {\n            window.history.go(-1);\n        } else {\n            UIComponent.getRouterFor(this).navTo(\"RouteMain\", {}, true);\n        }\n    }\n\n    onInit() {\n        const oRouter = (this.getOwnerComponent() as UIComponent)?.getRouter();\n        oRouter.getRoute(\"RouteSpotStatus\")!.attachMatched(this.onRouteMatched, this);\n    }\n\n    private onRouteMatched(event: Route$MatchedEvent): void {\n        const oParameters: any = event.getParameters();\n        const customerId = oParameters.arguments.index;\n        this.defaultFilter = new Filter(\"customerID\", FilterOperator.EQ, customerId, false);\n        this.setFilter((this.getView()?.byId(\"iconTabBar\") as IconTabBar)?.getSelectedKey());\n    }\n\n    private setFilter(key: string | undefined): void {\n        let statusFilters: Filter[] = [];\n        const listBinding = this.getView()?.byId(\"incidentList\")?.getBinding(\"items\") as ListBinding;      \n        if (key) {\n            statusFilters = this.getUrgencyFilter(key);\n        }\n        listBinding.filter([this.defaultFilter, ...statusFilters]);        \n    }\n\n}"],"mappings":"gOAOSA,EAAOC,EAAA,WAIhB,MAGqBC,EAAmBC,EAAUC,OAAA,oCAI9CC,iBAAgB,SAAAC,EAACC,GACb,OAAQC,OAAOC,OAAOT,GAA2BU,SAASH,GAAO,CAAC,IAAII,EAAO,UAAWC,EAAeC,GAAIN,EAAK,QAAU,EAC9H,EAEAO,eAAc,SAAAC,EAACC,GACX,MAAMT,EAAMS,EAAMC,aAAa,OAC/BC,KAAKC,UAAUZ,EACnB,EAEAa,UAAS,SAAAC,IACL,MAAMC,EAAeC,EAAQC,cAAcC,kBAC3C,GAAIH,IAAiBI,UAAW,CAC5BC,OAAOC,QAAQC,IAAI,EACvB,KAAO,CACHC,EAAYC,aAAab,MAAMc,MAAM,YAAa,CAAC,EAAG,KAC1D,CACJ,EAEAC,OAAM,SAAAC,IACF,MAAMC,EAAWjB,KAAKkB,qBAAqCC,YAC3DF,EAAQG,SAAS,mBAAoBC,cAAcrB,KAAKsB,eAAgBtB,KAC5E,EAEQsB,eAAc,SAAAC,EAACzB,GACnB,MAAM0B,EAAmB1B,EAAM2B,gBAC/B,MAAMC,EAAaF,EAAYG,UAAUC,MACzC5B,KAAK6B,cAAgB,IAAIpC,EAAO,aAAcC,EAAeC,GAAI+B,EAAY,OAC7E1B,KAAKC,UAAWD,KAAK8B,WAAWC,KAAK,eAA8BC,iBACvE,EAEQ/B,UAAS,SAAAgC,EAAC5C,GACd,IAAI6C,EAA0B,GAC9B,MAAMC,EAAcnC,KAAK8B,WAAWC,KAAK,iBAAiBK,WAAW,SACrE,GAAI/C,EAAK,CACL6C,EAAgBlC,KAAKb,iBAAiBE,EAC1C,CACA8C,EAAYE,OAAO,CAACrC,KAAK6B,iBAAkBK,GAC/C,IAAC,OAzCgBlD,CAAU","ignoreList":[]}